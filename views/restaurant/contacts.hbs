{{#extend "page"}}page-contacts{{/extend}}

{{#extend "body"}}
<div class="container">
  <h1>{{restaurant.name}} Contacts</h1>

  {{#each contacts}}
    <form id="contact-{{id}}" method="put" action="/api/restaurants/{{restaurant.id}}/contacts/{{id}}">
      <legend>Contact #{{@index}}</legend>
      {{> contact_form }}
      <button class="btn btn-primary btn-update-contact" type="submit">Update</button>
      <button class="btn btn-primary btn-remove-contact" type="submit">Delete</button>
    </form>
    <hr>

  {{/each}}

  <form method="POST" action="/api/restaurants/{{restaurant.id}}/contacts">
    <legend>New contact</legend>
    {{> contact_form }}
    <button class="btn btn-primary btn-create-contact" type="submit">Add contact</button>
  </form>
</div>
{{/extend}}


{{#extend "scripts"}}
<script>
  require( ['jquery', 'navbar', 'app/pages/contacts'], function( $, navbar, page ){
    $('.navbar').navbar({ toggleText: false, toggleLogin: false });

    page.init({
      contacts: {{{json contacts}}}
    });
  });
</script>
{{/extend}}
