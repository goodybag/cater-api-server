{{#extend "page"}}page-users{{/extend}}

{{#extend "body"}}
<div class="container" id="main-container">
  <ul class="breadcrumbs main-breadcrumbs">
    <li>
      <a href="/admin">Admin Panel</a>
    </li>
    <li>
      <a href="/admin/users">Users</a>
    </li>
    <li>{{#if user.name}}{{user.name}}{{else}}#{{user.id}}{{/if}}</li>
  </ul>

  <h1 class="page-title">#{{user.id}}{{#if user.name}} - {{user.name}}{{/if}}</h1>
  <div class="page-actions">
    <a
      class="btn btn-default"
      href="#">
      Login
    </a>
  </div>

  {{!-- Rewrite to semantic styling, instead of declaring tons of
  styles on every dom, extend classes into simple components --}}
  <section class="panel-component" id="users-edit">
    <form class="form-vertical">
      <div class="form-group">
        <label>Name</label>
        <input type="text" class="form-control" placeholder="Enter name" name="name" value="{{user.name}}">
      </div>
      <div class="form-group">
        <label>Email</label>
        <input type="email" class="form-control" placeholder="Enter email" name="email" value="{{user.email}}">
      </div>
      <div class="form-group">
        <label>Region</label>
        <input type="text" class="form-control" placeholder="Enter region">
      </div>
      <div class="form-group">
        <label>Permission Groups</label>
        <div>
          <label>
            <input
              type="checkbox"
              data-type="list"
              name="groups"
              class="form-control"
              value="client"
              {{#contains user.groups "client"}}checked="checked"{{/contains}}>
              Client
          </label>
        </div>
        <div>
          <label>
            <input
              type="checkbox"
              data-type="list"
              name="groups"
              class="form-control"
              value="admin"
              {{#contains user.groups "admin"}}checked="checked"{{/contains}}>
              Admin
          </label>
        </div>
        <div>
          <label>
            <input
              type="checkbox"
              data-type="list"
              name="groups"
              class="form-control"
              value="receipts"
              {{#contains user.groups "receipts"}}checked="checked"{{/contains}}>
              Receipts
          </label>
        </div>
      </div> {{!-- end permission groups --}}
      <div class="form-group">
        <label>Other</label>
        <div>
          <label>
            <input
              type="checkbox"
              name="is_tax_exempt"
              class="form-control"
              {{#if user.is_tax_exempt}}checked="checked"{{/if}}>
              Tax Exempt
          </label>
          <label>
            <input
              type="checkbox"
              name="is_invoiced"
              class="form-control"
              {{#if user.is_invoiced}}checked="checked"{{/if}}>
              Invoiced
          </label>
        </div>
      </div>
      <div class="form-group">
        <button class="btn btn-primary" type="submit">Save</button>
      </div>
    </form>
  </section>
</div>
{{/extend}}

{{#extend "scripts"}}
<script>
require([
  'app/models/user'
, 'app/views/admin/edit-user-view'
], function( User, View ) {
  var user = new User( {{{json user}}} );
  var view = new View( { model: user, el: '#users-edit' } );
});

</script>
{{/extend}}
