{{#extend "body"}}

<div class="restaurant-edit">
  <div class="container">
  <h1>Editing {{restaurant.name}}</h1>
    {{> restaurant_edit_nav }}

    <!--<Edit Body>-->
    <div class="restaurant-edit-body">
      <div class="alert-container"></div>
      <h2>Delivery Settings</h2>
      <form class="ap-form form-delivery-settings" action="/restaurants/{{restaurant.id}}/edit" method="POST">
        <input type="hidden" name="_method" value="PUT">

        <div class="form-group">
          <label class="control-label" for="input-name">Minimum Order
            <span class="help-block">required</span>
          </label>
          <div class="input-group">
            <span class="input-addon">$</span>
            <input type="text" class="form-control minimum-order" name="minimum_order" value="{{dollars restaurant.minimum_order}}">
          </div>
        </div>

        <div class="form-group">
          <label class="control-label" for="input-name">Delivery Zip Codes
            <span class="help-block">List of zip codes restaurant will
            deliver to. Please enter as a comma separated list.</span>
          </label>
          
          {{#each restaurant.delivery_zip_groups}}
          <div class="delivery-zip-group">
            <div class="input-group input-group-top">
              <span class="input-addon">$</span>
              <input type="text" class="form-control" name="fee" id="input-minimum-order" value="{{dollars fee}}">
            </div>
            <div class="input-group input-group-bottom">
              <input type="text" class="form-control" name="zips" value="{{array zips}}" placeholder="Ex. 78735, 78745">
            </div>
          </div>
          {{else}}
          <div class="delivery-zip-group">
            <div class="input-group input-group-top">
              <span class="input-addon">$</span>
              <input type="text" class="form-control" name="fee" id="input-minimum-order" value="{{dollars fee}}">
            </div>
            <div class="input-group input-group-bottom">
              <input type="text" class="form-control" name="zips" value="{{array zips}}" placeholder="Ex. 78735, 78745">
            </div>
          </div>
          {{/each}}
          
        </div>
        <div class="form-group">
          <button class="btn btn-default btn-add-delivery-tier">Add New Delivery Area</button>
        </div>

        <button class="btn btn-primary" type="submit">Update</button>
      </form>
    </div>
    <!--</Edit Body>-->
  </div>
</div>
{{/extend}}

{{#extend "scripts"}}

<script>
  // Bootstrap data
  define('data', ['app/models/restaurant'], function(Restaurant) {
    var data = {
      models: {
        restaurant: new Restaurant({{{json restaurant}}})
      },
      views: {

      }
    };
    return data;
  });
</script>

<script>
  require( ['app/pages/restaurant/edit-delivery-settings'], function( page ){
    page.init();
  });
</script>
{{/extend}}