///////////////
// Gift Card //
///////////////
//
// Usage:
// <div class="giftcard">
//   <div class="card-info">
//     <div class="amount">${{this.amount}}</div>
//     <div class="location">{{this.location}}</div>
//   </div>
//   <div class="giftcard-menu"></div>
// </div>
//
//

@card-width:          224px;
@card-height:         140px;
@card-radius:         8px;
@card-default-color:  #e84646;
@card-gold-color:     #E5C74D;
@card-menu-bg:        #F1F1F1;
@card-menu-color:     #ccc;

.giftcard-brand( @color ){
  background-color: @color;
  border-bottom: solid 2px darken( @color, 22% );

  & .menu-primary {
    background-color: @color;
  }
}

.giftcard {
  position: relative;
  #box > .display();
  #box > .align( center );
  #box > .pack( center );
  width: @card-width;
  height: @card-height;
  padding: 0 12px;
  border-radius: @card-radius;
  color: @white;
  text-align: center;
  font-weight: @light;
  text-shadow: 0 -1px 0 rgba( 0, 0, 0, 0.2 );
  overflow: hidden;
  cursor: pointer;
  .giftcard-brand( @card-default-color );
}

.giftcard .card-info {
  #box > .flex( 1 );
}

.giftcard-gold {
  .giftcard-brand( @card-gold-color );
}

.giftcard.disabled {
  .opacity(0.3);
  cursor: no-drop;
}

.giftcard:before,
.giftcard:after {
  content: "";
  position: absolute;
  width: 46px;
  height: 52px;
  z-index: 2;
  .transition( 0.2s, ease-out );
}

.giftcard:hover:before,
.giftcard:hover:after {
  .opacity(0);
}

.giftcard:before {
  bottom: 0;
  left: 0;
  background: url('/img/giftcard-gloss-dark.png');
  .opacity( 0.09 );
}

.giftcard:after {
  top: 0;
  right: 0;
  background: url('/img/giftcard-gloss-light.png');
  .opacity( 0.2 );
}

.giftcard .amount {
  font-size: 44px;
}

.giftcard .location {
  font-size: 17px;
  opacity: 0.9;
}

.giftcard .giftcard-menu {
  position: absolute;
  left: 0;
  top: @card-height + 1;
  width: 100%;
  height: 100%;
  z-index: 1;
  border-radius: @card-radius;
  background: @card-menu-bg;
  color: @card-menu-color;
  .transition( 0.2s, ease-out );
  .opacity(0);
}

.giftcard:hover .giftcard-menu {
  top: 0;
  .opacity(1);
}

.giftcard-menu .menu-footer {
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  padding: 3px 0 0;
  font-family: @font-family-serif;
  font-size: 26px;
  font-weight: 100;
  text-transform: uppercase;
  color: #fff;
  border: none;
}

// State
.giftcard {
  .state-clicked-once,
  .state-clicked-twice,
  .state-unavailable      { display: none; }
  .state-pre-click        { display: block; }

  &.disabled {
    .state-pre-click,
    .state-clicked-once,
    .state-clicked-twice  { display: none; }
    .state-unavailable    { display: block; }
  }

  &.state-clicked-once {
    .state-pre-click,
    .state-unavailable,
    .state-clicked-twice  { display: none; }
    .state-clicked-once   { display: block; }
  }

  &.state-clicked-twice {
    .state-pre-click,
    .state-unavailable,
    .state-clicked-once   { display: none; }
    .state-clicked-twice  { display: block; }
  }
}